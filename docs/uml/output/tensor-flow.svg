<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="526px" preserveAspectRatio="none" style="width:1884px;height:526px;background:#FFFFFF;" version="1.1" viewBox="0 0 1884 526" width="1884px" zoomAndPan="magnify"><title>Text to Embeddings to Semantic Search Flow</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="303.3857" x="789.4216" y="29.5332">Text to Embeddings to Semantic Search Flow</text><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="18.7793" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="22" x2="22" y1="121.2188" y2="444.7344"/></g><g><title>Raw Text</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="159.1191" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="162.5571" x2="162.5571" y1="121.2188" y2="444.7344"/></g><g><title>Tokenizer</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="256.1045" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="259.3701" x2="259.3701" y1="121.2188" y2="444.7344"/></g><g><title>Input IDs .PyTorch tensor.</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="392.9214" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="396.8389" x2="396.8389" y1="121.2188" y2="444.7344"/></g><g><title>Transformer Model .MacBERTh.BERT.</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="621.1382" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="625.0039" x2="625.0039" y1="121.2188" y2="444.7344"/></g><g><title>last_hidden_state .tensor.</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="848.21" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="851.2725" x2="851.2725" y1="121.2188" y2="444.7344"/></g><g><title>Aggregate Token Embeddings</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="1047.709" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1051.1475" x2="1051.1475" y1="121.2188" y2="444.7344"/></g><g><title>Chunk Vector Tensor</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="1232.4116" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1236.2705" x2="1236.2705" y1="121.2188" y2="444.7344"/></g><g><title>NumPy Array .vectors.</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="1393.3389" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1396.5527" x2="1396.5527" y1="121.2188" y2="444.7344"/></g><g><title>Embeddings Object</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="1558.2188" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1562.1294" x2="1562.1294" y1="121.2188" y2="444.7344"/></g><g><title>Semantic Search . Clustering</title><rect fill="#000000" fill-opacity="0.00000" height="323.5156" width="8" x="1776.5776" y="121.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1779.9263" x2="1779.9263" y1="121.2188" y2="444.7344"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="5" y="118.1426">User</text><ellipse cx="22.7793" cy="52.1094" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.7793,60.1094 L22.7793,87.1094 M9.7793,68.1094 L35.7793,68.1094 M22.7793,87.1094 L9.7793,102.1094 M22.7793,87.1094 L35.7793,102.1094" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="5" y="458.2676">User</text><ellipse cx="22.7793" cy="469.8438" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.7793,477.8438 L22.7793,504.8438 M9.7793,485.8438 L35.7793,485.8438 M22.7793,504.8438 L9.7793,519.8438 M22.7793,504.8438 L35.7793,519.8438" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Raw Text"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.124" x="126.5571" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.124" x="133.5571" y="110.1426">Raw Text</text></g><g class="participant participant-tail" data-participant="Raw Text"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.124" x="126.5571" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.124" x="133.5571" y="465.2676">Raw Text</text></g><g class="participant participant-head" data-participant="Tokenizer"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.4688" x="222.3701" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.4688" x="229.3701" y="110.1426">Tokenizer</text></g><g class="participant participant-tail" data-participant="Tokenizer"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.4688" x="222.3701" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.4688" x="229.3701" y="465.2676">Tokenizer</text></g><g class="participant participant-head" data-participant="Input IDs .PyTorch tensor."><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178.165" x="307.8389" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164.165" x="314.8389" y="110.1426">Input IDs (PyTorch tensor)</text></g><g class="participant participant-tail" data-participant="Input IDs .PyTorch tensor."><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178.165" x="307.8389" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164.165" x="314.8389" y="465.2676">Input IDs (PyTorch tensor)</text></g><g class="participant participant-head" data-participant="Transformer Model .MacBERTh.BERT."><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="258.2686" x="496.0039" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="244.2686" x="503.0039" y="110.1426">Transformer Model (MacBERTh/BERT)</text></g><g class="participant participant-tail" data-participant="Transformer Model .MacBERTh.BERT."><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="258.2686" x="496.0039" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="244.2686" x="503.0039" y="465.2676">Transformer Model (MacBERTh/BERT)</text></g><g class="participant participant-head" data-participant="last_hidden_state .tensor."><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="175.875" x="764.2725" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161.875" x="771.2725" y="110.1426">last_hidden_state (tensor)</text></g><g class="participant participant-tail" data-participant="last_hidden_state .tensor."><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="175.875" x="764.2725" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161.875" x="771.2725" y="465.2676">last_hidden_state (tensor)</text></g><g class="participant participant-head" data-participant="Aggregate Token Embeddings"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203.123" x="950.1475" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189.123" x="957.1475" y="110.1426">Aggregate Token Embeddings</text></g><g class="participant participant-tail" data-participant="Aggregate Token Embeddings"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203.123" x="950.1475" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189.123" x="957.1475" y="465.2676">Aggregate Token Embeddings</text></g><g class="participant participant-head" data-participant="Chunk Vector Tensor"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146.2822" x="1163.2705" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.2822" x="1170.2705" y="110.1426">Chunk Vector Tensor</text></g><g class="participant participant-tail" data-participant="Chunk Vector Tensor"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146.2822" x="1163.2705" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.2822" x="1170.2705" y="465.2676">Chunk Vector Tensor</text></g><g class="participant participant-head" data-participant="NumPy Array .vectors."><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="155.5723" x="1319.5527" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.5723" x="1326.5527" y="110.1426">NumPy Array (vectors)</text></g><g class="participant participant-tail" data-participant="NumPy Array .vectors."><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="155.5723" x="1319.5527" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141.5723" x="1326.5527" y="465.2676">NumPy Array (vectors)</text></g><g class="participant participant-head" data-participant="Embeddings Object"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.1787" x="1494.1294" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.1787" x="1501.1294" y="110.1426">Embeddings Object</text></g><g class="participant participant-tail" data-participant="Embeddings Object"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.1787" x="1494.1294" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122.1787" x="1501.1294" y="465.2676">Embeddings Object</text></g><g class="participant participant-head" data-participant="Semantic Search . Clustering"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195.3027" x="1682.9263" y="88.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181.3027" x="1689.9263" y="110.1426">Semantic Search / Clustering</text></g><g class="participant participant-tail" data-participant="Semantic Search . Clustering"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195.3027" x="1682.9263" y="443.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181.3027" x="1689.9263" y="465.2676">Semantic Search / Clustering</text></g><g class="message" data-participant-1="User" data-participant-2="Raw Text"><polygon fill="#181818" points="151.1191,149.5703,161.1191,153.5703,151.1191,157.5703,155.1191,153.5703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="22.7793" x2="157.1191" y1="153.5703" y2="153.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.3398" x="29.7793" y="148.7139">provides documents</text></g><g class="message" data-participant-1="Raw Text" data-participant-2="Tokenizer"><polygon fill="#181818" points="248.1045,179.9219,258.1045,183.9219,248.1045,187.9219,252.1045,183.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="163.1191" x2="254.1045" y1="183.9219" y2="183.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.9854" x="170.1191" y="179.0654">tokenize text</text></g><g class="message" data-participant-1="Tokenizer" data-participant-2="Input IDs .PyTorch tensor."><polygon fill="#181818" points="384.9214,210.2734,394.9214,214.2734,384.9214,218.2734,388.9214,214.2734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="260.1045" x2="390.9214" y1="214.2734" y2="214.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.7808" x="267.1045" y="209.417">create input_ids</text></g><g class="message" data-participant-1="Input IDs .PyTorch tensor." data-participant-2="Transformer Model .MacBERTh.BERT."><polygon fill="#181818" points="613.1382,240.625,623.1382,244.625,613.1382,248.625,617.1382,244.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="396.9214" x2="619.1382" y1="244.625" y2="244.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.4199" x="403.9214" y="239.7686">forward pass</text></g><g class="message" data-participant-1="Transformer Model .MacBERTh.BERT." data-participant-2="last_hidden_state .tensor."><polygon fill="#181818" points="840.21,270.9766,850.21,274.9766,840.21,278.9766,844.21,274.9766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="625.1382" x2="846.21" y1="274.9766" y2="274.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.1436" x="632.1382" y="270.1201">output</text></g><g class="message" data-participant-1="last_hidden_state .tensor." data-participant-2="Aggregate Token Embeddings"><polygon fill="#181818" points="1039.709,301.3281,1049.709,305.3281,1039.709,309.3281,1043.709,305.3281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="852.21" x2="1045.709" y1="305.3281" y2="305.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.3335" x="859.21" y="300.4717">mean over tokens</text></g><g class="message" data-participant-1="Aggregate Token Embeddings" data-participant-2="Chunk Vector Tensor"><polygon fill="#181818" points="1224.4116,331.6797,1234.4116,335.6797,1224.4116,339.6797,1228.4116,335.6797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1051.709" x2="1230.4116" y1="335.6797" y2="335.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.4917" x="1058.709" y="330.8232">result per chunk</text></g><g class="message" data-participant-1="Chunk Vector Tensor" data-participant-2="NumPy Array .vectors."><polygon fill="#181818" points="1385.3389,362.0313,1395.3389,366.0313,1385.3389,370.0313,1389.3389,366.0313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1236.4116" x2="1391.3389" y1="366.0313" y2="366.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.519" x="1243.4116" y="361.1748">.cpu().numpy()</text></g><g class="message" data-participant-1="NumPy Array .vectors." data-participant-2="Embeddings Object"><polygon fill="#181818" points="1550.2188,392.3828,1560.2188,396.3828,1550.2188,400.3828,1554.2188,396.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1397.3389" x2="1556.2188" y1="396.3828" y2="396.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.8799" x="1404.3389" y="391.5264">store vectors, ids, metas</text></g><g class="message" data-participant-1="Embeddings Object" data-participant-2="Semantic Search . Clustering"><polygon fill="#181818" points="1768.5776,422.7344,1778.5776,426.7344,1768.5776,430.7344,1772.5776,426.7344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1562.2188" x2="1774.5776" y1="426.7344" y2="426.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.3589" x="1569.2188" y="421.8779">FAISS search, KMeans clustering</text></g><!--SRC=[ZP91Jm8n48Nl_HKJJqk2SFTWWWW9CIY1rIifxGWhk-scdOBuwvrfYDaO95wQxRwlRrvdIXNL22L-4f27IRD1QoktZR9ROQCTLOO_T30xcDR-g9Gsv0EyHWnAoGgtzt2prCTiSWDtq0P_g2n6iDwa1Xr5rT65BlqUNVM5GN0wRu1OLrrDq9bh4y7iCKAnE9LUOX2ww4DFpfg0cX0gWTQLvKBN-5mwQ1VVVMWu-DnRhA6OQ_CmMPQxeQpPblMZ3XPQ7Tdo7qV4kTQHrhlAMdJhI1Ahw2JrYJYOkag9osYx3RYL_xaHdOc8IuFQWJzmaDmr3dUD5x_nBhazl64UMfahYL70c6g2bfsC4EeoA0xFgLcSO1I2Fa5no7hCLngODXMzWKjDUofwwYzGF3hlwcNpmPASZmmWdC4-yFZwV47IVAiBlDZyVf136DSf4WOcnN4wcgrM4BFOXwSvTok2-K7KDm00]--></g></svg>